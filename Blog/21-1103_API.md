# 开放实验室 · API 文档

![开放实验室 · API 文档](https://blog.mazey.net/wp-content/uploads/2025/09/API_SF_7x3.jpg)

工具类接口服务提供天气查询、IP与位置查询、短链接生成及代理转发功能。通过 GET 请求获取指定城市的天气以及请求者的 IP、位置和天气信息。POST 请求支持长链接转换为短链接和代理转发请求，解决跨域限制问题。所有接口均返回执行结果、信息和数据。

- [开放实验室 · API 文档](#开放实验室--api-文档)
  - [项目说明](#项目说明)
  - [接口说明](#接口说明)
    - [查询当天的天气](#查询当天的天气)
    - [查询请求者的IP、位置、天气](#查询请求者的ip位置天气)
    - [生成短链接](#生成短链接)
    - [代理转发](#代理转发)

## 项目说明

工具类的接口服务，域名是 `<BaseURL>` (停止服务)。

## 接口说明

### 查询当天的天气

**接口描述：**

查询指定城市当天的天气。

**请求路径：** **/server/weather/new-daily**

**请求方式：** **GET**

**请求参数：**

| 请求参数 | 参数类型 | 参数说明 | 是否必填 |
| :-------- | :--------| :------ | :------ |
| location | String | 城市名称，例如：shanghai、上海、beijing、北京 | 是 |

**请求示例：**

```shell
curl --location --request GET '<BaseURL>/server/weather/new-daily?location=shanghai'
```

**返回参数：**

| 返回参数 | 参数类型 | 参数说明 | 是否必有 |
| :-------- | :--------| :------ | :------ |
| ret | Number | 执行结果 0-成功 其他失败 | 是 |
| info | String | 成功/失败代码 | 是 |
| message | String | 成功/错误信息 | 是 |
| data | Object | 数据 | 是 |
| data.locationDetail | Object | 城市详情 | 是 |
| data.dayWeatherText | String | 白天天气 | 是 |
| data.nightWeatherText | String | 夜晚天气 | 是 |
| data.temperatureHigh | String | 最高温度 | 是 |
| data.temperatureLow | String | 最低温度 | 是 |

**返回示例：**

成功

```json
{
    "ret": 0,
    "info": "ok",
    "message": "成功",
    "data": {
        "locationDetail": {
            "id": "WTW3SJ5ZBJUY",
            "name": "上海",
            "country": "CN",
            "path": "上海,上海,中国",
            "timezone": "Asia/Shanghai",
            "timezone_offset": "+08:00"
        },
        "dayWeatherText": "晴",
        "nightWeatherText": "晴",
        "temperatureHigh": "14",
        "temperatureLow": "6"
    }
}
```

失败

```json
{
    "ret": 413,
    "info": "server_error",
    "message": "接口错误",
    "data": {}
}
```

### 查询请求者的IP、位置、天气

**接口描述：**

查询请求者的IP、位置、天气。

**请求路径：** **/server/user/info**
 
**请求方式：** **GET**

**请求示例：**

```shell
curl --location --request GET '<BaseURL>/server/user/info'
```

**返回参数：**

| 返回参数 | 参数类型 | 参数说明 | 是否必有 |
| :-------- | :--------| :------ | :------ |
| ret | Number | 执行结果 0-成功 其他失败 | 是 |
| info | String | 成功/失败代码 | 是 |
| message | String | 成功/错误信息 | 是 |
| data | Object | 数据 | 是 |
| data.ip | String | IP | 是 |
| data.location | Object | 位置 | 是 |
| data.weather | Object | 天气 | 是 |

**返回示例：**

成功

```json
{
    "ret": 0,
    "info": "ok",
    "message": "成功",
    "data": {
        "ip": "183.195.178.142",
        "location": {
            "operator": "移动",
            "continent": "亚洲",
            "country": "中国",
            "province": "上海",
            "city": "上海",
            "county": "",
            "lnt": "121.472644",
            "lat": "31.231706"
        },
        "weather": {
            "dayWeather": "多云",
            "temperatureHigh": "21",
            "temperatureLow": "14"
        }
    }
}
```

失败

```json
{
    "ret": 413,
    "info": "server_error",
    "message": "服务器错误",
    "dara": {}
}
```

### 生成短链接

**接口描述：**

将一个长链接转换成短链接。

**请求路径：** **/server/generate/short-link**

**请求方式：** **POST**

**请求参数：**

| 请求参数 | 参数类型 | 参数说明 | 是否必填 |
| :-------- | :--------| :------ | :------ |
| ori_link | String | 长链接 | 是 |

**请求示例：**

```json
{
    "ori_link": "https://blog.mazey.net/tiny?id=4750321-221467d8-fc24-4930-8e97-d90c7313a63c"
}
```

**返回参数：**

| 返回参数 | 参数类型 | 参数说明 | 是否必有 |
| :-------- | :--------| :------ | :------ |
| ret | Number | 执行结果 0-成功 其他失败 | 是 |
| info | String | 成功/失败代码 | 是 |
| message | String | 成功/错误信息 | 是 |
| data | Object | 数据 | 是 |
| data.tiny_link | String | 短链接 | 是 |

**返回示例：**

成功

```json
{
    "ret": 0,
    "info": "ok",
    "message": "成功",
    "data": {
        "tiny_link": "<BaseURL>/t/ef"
    }
}
```

失败

```json
{
    "ret": 413,
    "info": "server_error",
    "message": "服务器错误",
    "dara": {}
}
```

### 代理转发

**接口描述：**

代理转发，大部分时候应用于访问的接口受浏览器跨域限制，但是后端不方便修改的时候。

**请求路径：** **/server/agent**

**请求方式：** **POST**

**请求参数：**

| 请求参数 | 参数类型 | 参数说明 | 是否必填 |
| :-------- | :--------| :------ | :------ |
| method | String | 创建请求时使用的方法 | 否 |
| url | String | 用于请求的服务器 URL | 是 |
| params | Object | 与请求一起发送的 URL 参数 | 否 |
| data | Object | 作为请求主体被发送的数据 | 否 |

**请求示例：**

```json
{
    "method": "post",
    "url": "https://example.mazey.cn/api/demo",
    "params": {
        "key": "413322"
    },
    "data": {
        "line": 1,
        "id": "10"
    }
}
```

**返回参数：**

| 返回参数 | 参数类型 | 参数说明 | 是否必有 |
| :-------- | :--------| :------ | :------ |
| ret | Number | 执行结果 0-成功 其他失败 | 是 |
| info | String | 成功/失败代码 | 是 |
| message | String | 成功/错误信息 | 是 |
| data | Object | 数据 | 是 |

**返回示例：**

成功

```json
{
    "ret": 0,
    "info": "ok",
    "message": "成功",
    "dara": {}
}
```

失败

```json
{
    "ret": 413,
    "info": "server_error",
    "message": "服务器错误",
    "dara": {}
}
```

**版权声明**

本文为原创文章，作者保留版权。转载请保留本文完整内容，并以超链接形式注明作者及原文出处。

作者: [除除](https://github.com/chengchuu)
原文: <https://blog.mazey.net/5693.html>

(完)